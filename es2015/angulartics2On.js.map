{"version":3,"sources":["../../../src/lib/core/angulartics2On.ts"],"names":[],"mappings":"AAAA,OAAO,EAEL,SAAS,EACT,UAAU,EACV,KAAK,EACL,UAAU,GACX,MAAM,eAAA,CAAgB;AACvB,OAAO,EAAE,YAAA,EAAa,MAAO,2BAAA,CAA4B;AAEzD,OAAO,EAAE,YAAA,EAAa,MAAO,gBAAA,CAAiB;AAI9C,MAAM;IAUJ,YACU,KAAiB,EACjB,YAA0B,EAC1B,YAA0B;QAF1B,UAAK,GAAL,KAAK,CAAY;QACjB,iBAAY,GAAZ,YAAY,CAAc;QAC1B,iBAAY,GAAZ,YAAY,CAAc;QAPnC,0BAAqB,GAAQ,EAAE,CAAC;QAS/B,IAAI,CAAC,EAAE,GAAG,IAAI,CAAC,KAAK,CAAC,aAAa,CAAC;IACrC,CAAC;IAED,kBAAkB;QAEhB,EAAE,CAAC,CAAC,IAAI,CAAC,SAAS,EAAE,CAAC,CAAC,CAAC;YACrB,IAAI,CAAC,YAAY,CAAC,gBAAgB,CAChC,IAAI,CAAC,EAAE,EACP,IAAI,CAAC,cAAc,IAAI,OAAO,EAC9B,CAAC,KAAY,EAAE,EAAE,CAAC,IAAI,CAAC,UAAU,CAAC,KAAK,CAAC,CACzC,CAAC;QACJ,CAAC;IACH,CAAC;IACD,SAAS;QACP,MAAM,CAAC,OAAM,CAAC,MAAM,CAAC,KAAK,WAAW,CAAC;IACxC,CAAC;IACD,UAAU,CAAC,KAAY;QACrB,MAAM,MAAM,GAAG,IAAI,CAAC,iBAAiB,CAAC;QACtC,MAAM,UAAU,qBACX,IAAI,CAAC,qBAAqB,IAC7B,SAAS,EAAE,KAAK,CAAC,IAAI,GACtB,CAAC;QAEF,EAAE,CAAC,CAAC,IAAI,CAAC,mBAAmB,CAAC,CAAC,CAAC;YAC7B,UAAU,CAAC,QAAQ,GAAG,IAAI,CAAC,mBAAmB,CAAC;QACjD,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC1B,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAC3C,CAAC;QACD,EAAE,CAAC,CAAC,IAAI,CAAC,gBAAgB,CAAC,CAAC,CAAC;YAC1B,UAAU,CAAC,KAAK,GAAG,IAAI,CAAC,gBAAgB,CAAC;QAC3C,CAAC;QAED,IAAI,CAAC,YAAY,CAAC,UAAU,CAAC,IAAI,CAAC;YAChC,MAAM;YACN,UAAU;SACX,CAAC,CAAC;IACL,CAAC;;AAWI,yBAAU,GAA0B;IAC3C,EAAE,IAAI,EAAE,UAAU,EAAE;IACpB,EAAE,IAAI,EAAE,SAAS,EAAE,IAAI,EAAE,CAAC;gBACxB,QAAQ,EAAE,kBAAkB;aAC7B,EAAG,EAAE;CACL,CAAC;AAEK,6BAAc,GAAmE,GAAG,EAAE,CAAC;IAC9F,EAAC,IAAI,EAAE,UAAU,GAAG;IACpB,EAAC,IAAI,EAAE,YAAY,GAAG;IACtB,EAAC,IAAI,EAAE,YAAY,GAAG;CACrB,CAAC;AACK,6BAAc,GAA2C;IAChE,gBAAgB,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,gBAAgB,EAAG,EAAE,EAAE;IAChE,mBAAmB,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IACvC,qBAAqB,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IACzC,kBAAkB,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IACtC,kBAAkB,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;IACtC,uBAAuB,EAAE,CAAC,EAAE,IAAI,EAAE,KAAK,EAAE,EAAE;CAC1C,CAAC","file":"angulartics2On.js","sourceRoot":"","sourcesContent":["import {\n  AfterContentInit,\n  Directive,\n  ElementRef,\n  Input,\n  Injectable,\n} from '@angular/core';\nimport { EventManager } from '@angular/platform-browser';\n\nimport { Angulartics2 } from './angulartics2';\n\n\n\nexport class Angulartics2On implements AfterContentInit {\n   angulartics2On: string;\n   angularticsAction: string;\n   angularticsCategory: string;\n   angularticsLabel: string;\n   angularticsValue: string;\n   angularticsProperties: any = {};\n\n  private el: any;\n\n  constructor(\n    private elRef: ElementRef,\n    private angulartics2: Angulartics2,\n    private eventManager: EventManager\n  ) {\n    this.el = this.elRef.nativeElement;\n  }\n\n  ngAfterContentInit() {\n    // Don't listen in server-side\n    if (this.isBrowser()) {\n      this.eventManager.addEventListener(\n        this.el,\n        this.angulartics2On || 'click',\n        (event: Event) => this.eventTrack(event),\n      );\n    }\n  }\n  isBrowser() {\n    return typeof(window) !== 'undefined';\n  }\n  eventTrack(event: Event) {\n    const action = this.angularticsAction; // || this.inferEventName();\n    const properties: any = {\n      ...this.angularticsProperties,\n      eventType: event.type,\n    };\n\n    if (this.angularticsCategory) {\n      properties.category = this.angularticsCategory;\n    }\n    if (this.angularticsLabel) {\n      properties.label = this.angularticsLabel;\n    }\n    if (this.angularticsValue) {\n      properties.value = this.angularticsValue;\n    }\n\n    this.angulartics2.eventTrack.next({\n      action,\n      properties,\n    });\n  }\n\n  /*private isCommand() {\n    return ['a:', 'button:', 'button:button', 'button:submit', 'input:button', 'input:submit'].indexOf(\n      getDOM().tagName(this.el).toLowerCase() + ':' + (getDOM().type(this.el) || '')) >= 0;\n  }\n\n  private inferEventName() {\n    if (this.isCommand()) return getDOM().getText(this.el) || getDOM().getValue(this.el);\n    return getDOM().getProperty(this.el, 'id') || getDOM().getProperty(this.el, 'name') || getDOM().tagName(this.el);\n  }*/\nstatic decorators: DecoratorInvocation[] = [\n{ type: Injectable },\n{ type: Directive, args: [{\n  selector: '[angulartics2On]'\n}, ] },\n];\n/** @nocollapse */\nstatic ctorParameters: () => ({type: any, decorators?: DecoratorInvocation[]}|null)[] = () => [\n{type: ElementRef, },\n{type: Angulartics2, },\n{type: EventManager, },\n];\nstatic propDecorators: {[key: string]: DecoratorInvocation[]} = {\n'angulartics2On': [{ type: Input, args: ['angulartics2On', ] },],\n'angularticsAction': [{ type: Input },],\n'angularticsCategory': [{ type: Input },],\n'angularticsLabel': [{ type: Input },],\n'angularticsValue': [{ type: Input },],\n'angularticsProperties': [{ type: Input },],\n};\n}\n\ninterface DecoratorInvocation {\n  type: Function;\n  args?: any[];\n}\n"]}